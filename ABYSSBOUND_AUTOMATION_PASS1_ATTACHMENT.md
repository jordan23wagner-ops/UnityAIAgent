# ABYSSBOUND — AUTOMATION PASS #1
## Zone1 Farm-Ready Setup (Loot V2 Gear + Legacy Materials + T1 Merchants)

Date: 2025-12-25

This doc covers the editor-only automation added for Zone1 “farm-ready” setup.

## What this adds
New editor menus implemented in:
- `Assets/Editor/Abyssbound/Content/Zone1FarmReadySetupEditor.cs`

Menus:
- `Tools/Abyssbound/Content/Report Loot V2 Equipment Coverage`
- `Tools/Abyssbound/Content/Generate Missing T1 Loot V2 Items`
- `Tools/Abyssbound/Loot/Rebuild Zone1 Loot V2 Tables (Trash/Elite/Boss)`
- `Tools/Abyssbound/Shops/Create + Rebuild Alchemy ShopInventory (T1)`
- `Tools/Abyssbound/Shops/Add Herbs + Secondaries To Skilling ShopInventory (T1)`
- `Tools/Abyssbound/Shops/Rebuild T1 Weapons & Gear ShopInventory`
- `Tools/Abyssbound/Content/One-Click Zone1 Content Setup`

## Safety / constraints (by design)
- Editor-only (`#if UNITY_EDITOR`).
- No runtime refactors.
- Does not overwrite existing Loot V2 item assets.
- Zone1 Loot V2 tables are updated in-place by replacing the `items` list only.
- Excludes Loot V2 items whose *asset name* or `id` starts with `Test_`, `Debug_`, or `QA_`.
- Legacy alchemy materials are created as non-equippable items (`equipmentSlot = None`) so they stack by `itemId` in `PlayerInventory`.

## Assets this automation reads/writes
Loot V2 (Resources):
- Reads items under `Assets/Resources/Loot/Items/...`
- Ensures registry contains all items:
  - `Assets/Resources/Loot/ItemRegistry.asset`
- Updates Zone1 tables (in-place):
  - `Assets/Resources/Loot/Tables/Zone1_Trash.asset`
  - `Assets/Resources/Loot/Tables/Zone1_Elite.asset`
  - `Assets/Resources/Loot/Tables/Zone1_Boss.asset`
- Creates missing Tier1 equipment (auto-generated):
  - `Assets/Resources/Loot/Items/Tier1/AutoGenerated/*.asset`

Legacy items + shops:
- Creates/updates legacy alchemy materials:
  - `Assets/GameData/Items/Alchemy/Item_*.asset`
- Creates/updates Alchemy inventory:
  - `Assets/Abyss/Shops/Inventories/ShopInventory_Alchemy.asset`
- Rebuilds Weapons inventory (T1-only list; preserves prior prices when possible):
  - `Assets/Abyss/Shops/Inventories/ShopInventory_Weapons.asset`

## Prerequisites
1) Open the project in Unity (Edit Mode, not Play Mode).
2) Ensure Loot V2 starter content exists (only needed if your `ItemRegistry.asset` is missing):
   - Run `Tools/Abyssbound/Content/Create Starter Loot Content`

## One-click run (recommended)
1) In Unity (Edit Mode), run:
   - `Tools/Abyssbound/Content/One-Click Zone1 Content Setup`
2) Confirm the Console shows:
   - Coverage report per slot
   - Any created items (only if missing)
   - Zone1 tables updated counts
   - Alchemy shop inventory created/updated
   - Weapons shop inventory created/updated

## QA: exact checklist
### A) Loot V2 equipment coverage
1) Run:
   - `Tools/Abyssbound/Content/Report Loot V2 Equipment Coverage`
2) Expected:
   - Console prints counts for all equipment slots.
   - If missing slots exist, it logs a warning listing them.

### B) Auto-generate missing Tier1 Loot V2 items
1) Run:
   - `Tools/Abyssbound/Content/Generate Missing T1 Loot V2 Items`
2) Expected:
   - Creates *only* the missing slots into `Assets/Resources/Loot/Items/Tier1/AutoGenerated/`.
   - Does **not** overwrite any authored assets.
   - Re-runs coverage report and should show no missing slots.

### C) Rebuild Zone1 Loot V2 tables (Trash/Elite/Boss)
1) Run:
   - `Tools/Abyssbound/Loot/Rebuild Zone1 Loot V2 Tables (Trash/Elite/Boss)`
2) Expected:
   - Each of these assets has its `items` list replaced with the eligible Loot V2 equipment list:
     - `Assets/Resources/Loot/Tables/Zone1_Trash.asset`
     - `Assets/Resources/Loot/Tables/Zone1_Elite.asset`
     - `Assets/Resources/Loot/Tables/Zone1_Boss.asset`
   - Rarity weights are not modified by this tool.

### D) Alchemy materials + Alchemy shop inventory
1) Run:
   - `Tools/Abyssbound/Shops/Create + Rebuild Alchemy ShopInventory (T1)`
2) Expected:
   - Creates legacy items under `Assets/GameData/Items/Alchemy/` if missing.
   - Creates/updates `Assets/Abyss/Shops/Inventories/ShopInventory_Alchemy.asset`.

### D2) Add herbs + secondaries to Skilling inventory (authoritative merchant inventory)
1) Run:
   - `Tools/Abyssbound/Shops/Add Herbs + Secondaries To Skilling ShopInventory (T1)`
2) Expected:
   - Adds missing herb/secondary entries into `Assets/Abyss/Shops/Inventories/ShopInventory_Skilling.asset`.
   - Does not remove or reprice existing Skilling entries.

### E) Weapons shop T1-only
1) Run:
   - `Tools/Abyssbound/Shops/Rebuild T1 Weapons & Gear ShopInventory`
2) Expected:
   - `Assets/Abyss/Shops/Inventories/ShopInventory_Weapons.asset` contains only the T1 starter list (plus basic armor pieces).
   - Prices are preserved for existing matching itemIds where possible.

### F) Loot V2 simulation (editor menu names verified)
Option 1 (Selected Enemy):
1) Enter Play Mode.
2) Select an enemy GameObject in the Hierarchy that has Loot V2 drop component.
3) Run:
   - `Tools/Abyssbound/Loot/Simulate 200 Drops (Selected Enemy, Loot V2)`
4) Expected:
   - Console prints a Loot V2 sim report.

Option 2 (Current Table):
1) Enter Play Mode.
2) Run:
   - `Tools/Abyssbound/QA/Simulate 200 Drops (Loot V2 Current Table)`
3) Expected:
   - Console prints a Loot QA report for the current configured LootTableSO.

### G) Stacking validation (legacy materials)
1) Acquire the same alchemy material twice (e.g., buy 2× Vial / pick up 2× of the same herb).
2) Open the inventory UI.
3) Expected:
   - The material shows as a single inventory entry with a quantity/count increasing (stacked by `itemId`).

### H) Skilling merchant validation (herbs visible)
1) Open the Skilling merchant UI.
2) Expected:
   - Guam and other herbs appear in the merchant list.

## If something fails
- If you see: `Missing ItemRegistry at Assets/Resources/Loot/ItemRegistry.asset`, run:
  - `Tools/Abyssbound/Content/Create Starter Loot Content`
  then re-run One-Click.
- If Zone1 table assets are missing, re-run:
  - `Tools/Abyssbound/Content/Create Starter Loot Content`

## Sharing / reporting
- After running the sim, you can copy the last Loot V2 sim report via:
  - `Tools/Abyssbound/Loot/Copy Last Loot V2 Sim Report`

## Rollback
- These tools create/modify assets. If you want to revert, use git (recommended):
  - `git status`
  - `git checkout -- <asset paths>` or `git restore <asset paths>`
